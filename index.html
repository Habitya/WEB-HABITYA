<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Habitya Living - Portal de Alquileres</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --brand-primary: #0D3B4F;
      --brand-secondary: #57C7AC;
      --brand-light: #F5F1E8;
      --chart-bg: rgba(87, 199, 172, 0.2);
      --text-main: var(--brand-primary);
      --text-alt: var(--brand-secondary);
    }
  </style>
</head>
<body class="bg-brand-light text-text-main font-sans relative">

  <!-- HEADER -->
  <header class="bg-brand-light shadow-md fixed w-full z-40">
    <nav class="container mx-auto p-4 flex justify-between items-center">
      <a href="#" class="flex items-center space-x-2">
        <img src="logo-habitya.svg" alt="Logo Habitya" class="h-8">
        <span class="text-2xl font-bold" style="color: var(--text-main)">Habitya Living</span>
      </a>
      <ul class="flex space-x-8">
        <li><a href="#home" class="hover:text-text-alt">Inicio</a></li>
        <li><a href="#inquilinos" class="hover:text-text-alt">Inquilinos</a></li>
        <li><a href="#propietarios" class="hover:text-text-alt">Propietarios</a></li>
      </ul>
    </nav>
  </header>

  <!-- HERO -->
  <section id="home" class="pt-24 bg-white">
    <div class="container mx-auto text-center py-20">
      <h1 class="text-5xl font-extrabold mb-4" style="color: var(--text-main)">Bienvenido a Habitya Living</h1>
      <p class="text-xl mb-8">Tu plataforma integral de gestión de alquileres para propietarios e inquilinos.</p>
      <a href="#inquilinos" class="bg-brand-secondary text-white py-3 px-6 rounded-lg hover:bg-teal-400 transition">Soy Inquilino</a>
      <a href="#propietarios" class="ml-4 bg-brand-primary text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition">Soy Propietario</a>
    </div>
  </section>

  <!-- ÁREA DE INQUILINOS -->
  <section id="inquilinos" class="container mx-auto py-16">
    <h2 class="text-3xl font-bold mb-6 text-center" style="color: var(--text-main)">Área de Inquilinos</h2>
    <div id="login-box" class="max-w-md mx-auto bg-white rounded-2xl shadow-lg p-6">
      <h3 class="text-2xl font-semibold mb-4" style="color: var(--text-main)">Acceso Inquilinos</h3>
      <form onsubmit="loginInquilino(event)">
        <div class="mb-4">
          <label class="block mb-1 font-medium">Usuario</label>
          <input id="tenant-user" type="text" required class="w-full border rounded-lg p-2" />
        </div>
        <div class="mb-4">
          <label class="block mb-1 font-medium">Contraseña</label>
          <input id="tenant-pass" type="password" required class="w-full border rounded-lg p-2" />
        </div>
        <button type="submit" class="w-full bg-brand-secondary text-white py-3 rounded-lg">Entrar</button>
      </form>
    </div>
    <div id="dashboard-inquilino" class="hidden max-w-xl mx-auto">
      <div class="bg-white rounded-2xl shadow-lg p-6 text-center mb-8">
        <h4 class="font-semibold text-2xl mb-4" style="color: var(--text-main)">Estado de tu Alquiler</h4>
        <canvas id="progressChart"></canvas>
        <div class="mt-4 space-y-1">
          <p><strong style="color: var(--text-alt)">Pagado:</strong> <span id="paidAmount">€0</span></p>
          <p><strong style="color: var(--text-alt)">Restante:</strong> <span id="remainingAmount">€0</span></p>
        </div>
      </div>
      <div class="flex flex-col md:flex-row items-center justify-between gap-4 mb-6">
        <button onclick="mostrarFacturas()" class="bg-brand-primary text-white py-3 px-6 rounded-lg">Facturas</button>
        <button onclick="solicitarServicioInquilino()" class="bg-brand-secondary text-white py-3 px-6 rounded-lg">Servicios</button>
      </div>
      <div id="invoice-list" class="hidden bg-white rounded-2xl shadow-lg p-6">
        <h4 class="font-semibold text-xl mb-4">Tus Facturas</h4>
        <ul id="invoices" class="list-disc list-inside"></ul>
      </div>
    </div>
  </section>

  <!-- ÁREA DE PROPIETARIOS -->
  <section id="propietarios" class="container mx-auto py-16">
    <h2 class="text-3xl font-bold mb-6 text-center" style="color: var(--text-main)">Área de Propietarios</h2>
    <div id="login-owner" class="max-w-md mx-auto bg-white rounded-2xl shadow-lg p-6">
      <h3 class="text-2xl font-semibold mb-4" style="color: var(--text-main)">Acceso Propietarios</h3>
      <form onsubmit="loginOwner(event)">
        <div class="mb-4">
          <label class="block mb-1 font-medium">Usuario</label>
          <input id="owner-user" type="text" required class="w-full border rounded-lg p-2" />
        </div>
        <div class="mb-4">
          <label class="block mb-1 font-medium">Contraseña</label>
          <input id="owner-pass" type="password" required class="w-full border rounded-lg p-2" />
        </div>
        <button type="submit" class="w-full bg-brand-secondary text-white py-3 rounded-lg">Entrar</button>
      </form>
    </div>
    <div id="dashboard-owner" class="hidden max-w-4xl mx-auto">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
        <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
          <h4 class="font-semibold text-xl mb-4">Ingresos</h4>
          <canvas id="incomeChart"></canvas>
          <p><strong style="color: var(--text-alt)">Totales:</strong> <span id="totalIncome">€0</span></p>
          <p><strong style="color: var(--text-alt)">Pendiente:</strong> <span id="pendingIncome">€0</span></p>
        </div>
        <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
          <h4 class="font-semibold text-xl mb-4">Propiedades</h4>
          <p>Total inmuebles: <strong>5</strong></p>
          <p>Ocupación: <strong>80%</strong></p>
          <p>Reservas: <strong>2</strong></p>
        </div>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <button onclick="verContratos()" class="bg-white rounded-2xl shadow-lg p-6">Contratos</button>
        <button onclick="openModal()" class="bg-white rounded-2xl shadow-lg p-6">Subir Factura</button>
        <button onclick="scheduleMaintenance()" class="bg-white rounded-2xl shadow-lg p-6">Mantenimiento</button>
      </div>
    </div>
  </section>

  <!-- CHATBOT FLOTANTE -->
  <div id="boton-asistente" class="fixed bottom-6 left-6 z-50">
    <button onclick="toggleAsistente()"><img src="/images/chatbot-chica.png" alt="Asistente" class="h-12 w-12 rounded-full shadow-lg border-2 border-white"></button>
  </div>
  <div id="asistente-virtual" class="fixed bottom-20 left-6 w-80 bg-black text-white rounded-2xl shadow-xl hidden flex-col overflow-hidden z-50">
    <div class="bg-brand-primary p-4 flex justify-between items-center"><h3 id="asistente-title">Asistente Virtual</h3><button onclick="toggleAsistente()">×</button></div>
    <div id="contenedor-chat" class="p-4 h-64 overflow-y-auto bg-black"></div>
    <div class="p-4 bg-gray-800 flex"><input id="input-chat" type="text" placeholder="Escribe tu pregunta..." class="flex-1 rounded p-2" onkeydown="if(event.key==='Enter') enviarMensaje()"><button onclick="enviarMensaje()" class="ml-2">➤</button></div>
  </div>

  <!-- MODAL SUBIR FACTURA -->
  <div id="invoice-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white rounded-2xl shadow-lg w-96 p-6">
      <h3 class="text-xl font-semibold mb-4" style="color: var(--text-main)">Subir Factura</n    </div>
  </div>

  <footer class="bg-brand-light text-text-main py-6 mt-16 text-center">
    <p>&copy; 2025 Habitya Living. Todos los derechos reservados.</p>
  </footer>

  <script>
    // Test credentials
    const tenants = { 'tenant': 'tenant123' };
    const owners = { 'owner': 'owner123' };
    // Inquilino login
    function loginInquilino(e) {
      e.preventDefault();
      const u = document.getElementById('tenant-user').value;
      const p = document.getElementById('tenant-pass').value;
      if (tenants[u] === p) { document.getElementById('login-box').classList.add('hidden'); document.getElementById('dashboard-inquilino').classList.remove('hidden'); initProgressChart(); }
      else alert('Credenciales inquilino incorrectas');
    }
    // Propietario login
    function loginOwner(e) {
      e.preventDefault();
      const u = document.getElementById('owner-user').value;
      const p = document.getElementById('owner-pass').value;
      if (owners[u] === p) { document.getElementById('login-owner').classList.add('hidden'); document.getElementById('dashboard-owner').classList.remove('hidden'); initIncomeChart(); }
      else alert('Credenciales propietario incorrectas');
    }
    // Remaining functions: charts, invoices, chatbot omitted for brevity
  </script>
</body>
</html>
